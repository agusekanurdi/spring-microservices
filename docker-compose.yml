version: '3'

services:
  config-service:
    container_name: config-service
    restart: always
    image: config-service:latest
    build:
      context: ./config-service
    environment:
    - SPRING_PROFILES_ACTIVE=native

  discovery-service:
    container_name: discovery-service
    restart: always
    image: discovery-service:latest
    build:
      context: ./discovery-service
    ports:
    - 8051:8051
    depends_on:
    - config-service
    environment:
    - SPRING_PROFILES_ACTIVE=deployment

  auth-service:
    container_name: auth-service
    restart: always
    image: auth-service:latest
    build:
      context: ./auth-service
    ports:
    - 8052:8052
    depends_on:
    - discovery-service
    environment:
    - SPRING_PROFILES_ACTIVE=deployment

  proxy-service:
    container_name: proxy-service
    restart: always
    image: proxy-service:latest
    build:
      context: ./proxy-service
    ports:
    - 8053:8053
    depends_on:
    - discovery-service
    environment:
    - SPRING_PROFILES_ACTIVE=deployment